{{ define "main" }}
<div class="horizontal container">
  <header class="vertical banner" role="banner">
    <h1>the halcyon blog</h1>
    <p>{{ .Site.Params.description }}</p>
    <nav>
      <ul>
        <li><span aria-hidden="true">→</span> home</li>
        {{ if gt (len (where .Site.RegularPages "Type" "posts")) 5 }}
        <li><a href="{{ "/posts" | relURL }}">archive</a></li>
        {{ end }}
        <li><a href="{{ "/about" | relURL }}">about</a></li>
      </ul>
    </nav>
  </header>

  <main class="post-list">
    {{ $posts := (where .Site.RegularPages "Type" "posts") }}
    {{ range first 5 ($posts) }}
    <section class="post-preview">

      <span class="badges">
        {{ range .Param "categories" }}
        <span class="badge post-label">
          {{ . }}
        </span>
        {{ end }}
      </span>

      <a href="{{.Permalink}}">
        <h2>
          {{.Title}}
        </h2>
      </a>
      <p>{{.Summary}}</p>
      <p class="meta">
      {{.Date.Format "January 2, 2006" }} &mdash; {{.ReadingTime}} minute read
      </p>
    </section>
    {{ end }}

    {{ if gt (len $posts) 5 }}
    <section>
      Looking for something that's not as recent? Chances are you will find it
      in the <a href="/posts">archives</a>.
    </section>
    {{ end }}
  </main>
</div>

<footer role="contentinfo">
  &copy; 2019. Made with ✨.
</footer>
{{ end }}
